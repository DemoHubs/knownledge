# Semaphore

Semaphore信号量是用来控制同时访问特定资源的线程数量，它通过协调各个线程，以保证合理的使用公共资源。



## 源码



### 获取锁

判断还有没有剩余的资源，如果小于0，表示没有了，则进入同步队列等待。

否则，表示还有剩余资源可以访问，使用CAS更新state，表示获取生成。



#### 公平锁实现acquire()

默认获取锁的方式是非公平锁，那么使用公平锁的方式怎么实现呢？很简单的，*当同步队列里有其它等待更久的线程*的时候，就不允许获取资源。这一点和其他同步器是一致的。







## 释放锁

用完资源，CAS更新增加资源的数目，并且唤醒阻塞的线程，让其重新去获取信号量。







## 参考

https://blog.csdn.net/sinat_34976604/article/details/80970977

